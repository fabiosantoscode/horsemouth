<emu-clause id="sec-keyed-collections" oldids="sec-keyed-collection"><span id="sec-keyed-collection"></span>
  <h1><span class="secnum">24</span> Keyed Collections</h1>

  <emu-clause id="sec-map-objects">
    <h1><span class="secnum">24.1</span> Map Objects</h1>
    <p>Maps are collections of key/value pairs where both the keys and values may be arbitrary <emu-xref href="#sec-ecmascript-language-types" id="_ref_11782"><a href="#sec-ecmascript-language-types">ECMAScript language values</a></emu-xref>. A distinct key value may only occur in one key/value pair within the Map's collection. Distinct key values are discriminated using the <emu-xref aoid="SameValueZero" id="_ref_11783"><a href="#sec-samevaluezero">SameValueZero</a></emu-xref> comparison algorithm.</p>
    <p>Maps must be implemented using either hash tables or other mechanisms that, on average, provide access times that are sublinear on the number of elements in the collection. The data structure used in this specification is only intended to describe the required observable semantics of Maps. It is not intended to be a viable implementation model.</p>

    <emu-clause id="sec-map-constructor">
      <h1><span class="secnum">24.1.1</span> The Map Constructor</h1>
      <p>The Map <emu-xref href="#constructor" id="_ref_11784"><a href="#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>is <dfn>%Map%</dfn>.</li>
        <li>is the initial value of the <emu-val>"Map"</emu-val> property of the <emu-xref href="#sec-global-object" id="_ref_11785"><a href="#sec-global-object">global object</a></emu-xref>.</li>
        <li>creates and initializes a new Map when called as a <emu-xref href="#constructor" id="_ref_11786"><a href="#constructor">constructor</a></emu-xref>.</li>
        <li>is not intended to be called as a function and will throw an exception when called in that manner.</li>
        <li>may be used as the value in an <code>extends</code> clause of a class definition. Subclass <emu-xref href="#constructor" id="_ref_11787"><a href="#constructor">constructors</a></emu-xref> that intend to inherit the specified Map behaviour must include a <code>super</code> call to the Map <emu-xref href="#constructor" id="_ref_11788"><a href="#constructor">constructor</a></emu-xref> to create and initialize the subclass instance with the internal state necessary to support the <code>Map.prototype</code> built-in methods.</li>
      </ul>

      <emu-clause id="sec-map-iterable">
        <h1><span class="secnum">24.1.1.1</span> Map ( [ <var>iterable</var> ] )</h1>
        <p>This function performs the following steps when called:</p>
        <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>map</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_11789"><a href="#sec-ordinarycreatefromconstructor" class="e-user-code">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Map.prototype%"</emu-val>, ¬´ [[MapData]] ¬ª).</li><li>Set <var>map</var>.[[MapData]] to a new empty <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11790"><a href="#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>If <var>iterable</var> is either <emu-val>undefined</emu-val> or <emu-val>null</emu-val>, return <var>map</var>.</li><li>Let <var>adder</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_11791"><a href="#sec-get-o-p" class="e-user-code">Get</a></emu-xref>(<var>map</var>, <emu-val>"set"</emu-val>).</li><li>Return ?&nbsp;<emu-xref aoid="AddEntriesFromIterable" id="_ref_11792"><a href="#sec-add-entries-from-iterable" class="e-user-code">AddEntriesFromIterable</a></emu-xref>(<var>map</var>, <var>iterable</var>, <var>adder</var>).</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>If the parameter <var>iterable</var> is present, it is expected to be an object that implements an <emu-xref href="#sec-well-known-symbols" id="_ref_11793"><a href="#sec-well-known-symbols">@@iterator</a></emu-xref> method that returns an iterator object that produces a two element <emu-xref href="#sec-lengthofarraylike" id="_ref_11794"><a href="#sec-lengthofarraylike">array-like object</a></emu-xref> whose first element is a value that will be used as a Map key and whose second element is the value to associate with that key.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-add-entries-from-iterable" type="abstract operation" aoid="AddEntriesFromIterable">
        <h1><span class="secnum">24.1.1.2</span> AddEntriesFromIterable ( <var>target</var>, <var>iterable</var>, <var>adder</var> )</h1>
        <p>The abstract operation AddEntriesFromIterable takes arguments <var>target</var>, <var>iterable</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_11795"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>, but not <emu-val>undefined</emu-val> or <emu-val>null</emu-val>), and <var>adder</var> (a <emu-xref href="#function-object" id="_ref_11796"><a href="#function-object">function object</a></emu-xref>) and returns either a <emu-xref href="#sec-completion-record-specification-type" id="_ref_11797"><a href="#sec-completion-record-specification-type">normal completion containing</a></emu-xref> an <emu-xref href="#sec-ecmascript-language-types" id="_ref_11798"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref> or a <emu-xref href="#sec-completion-record-specification-type" id="_ref_11799"><a href="#sec-completion-record-specification-type">throw completion</a></emu-xref>. <var>adder</var> will be invoked, with <var>target</var> as the receiver. It performs the following steps when called:</p>
        <emu-alg><ol><li>If <emu-xref aoid="IsCallable" id="_ref_11800"><a href="#sec-iscallable">IsCallable</a></emu-xref>(<var>adder</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>iteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIterator" id="_ref_11801"><a href="#sec-getiterator" class="e-user-code">GetIterator</a></emu-xref>(<var>iterable</var>).</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep" id="_ref_11802"><a href="#sec-iteratorstep" class="e-user-code">IteratorStep</a></emu-xref>(<var>iteratorRecord</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <var>target</var>.</li><li>Let <var>nextItem</var> be ?&nbsp;<emu-xref aoid="IteratorValue" id="_ref_11803"><a href="#sec-iteratorvalue" class="e-user-code">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>If <emu-xref aoid="Type" id="_ref_11804"><a href="#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>nextItem</var>) is not Object, then<ol><li>Let <var>error</var> be <emu-xref aoid="ThrowCompletion" id="_ref_11805"><a href="#sec-throwcompletion">ThrowCompletion</a></emu-xref>(a newly created <emu-val>TypeError</emu-val> object).</li><li>Return ?&nbsp;<emu-xref aoid="IteratorClose" id="_ref_11806"><a href="#sec-iteratorclose" class="e-user-code">IteratorClose</a></emu-xref>(<var>iteratorRecord</var>, <var>error</var>).</li></ol></li><li>Let <var>k</var> be <emu-xref aoid="Completion" id="_ref_11807"><a href="#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Get" id="_ref_11808"><a href="#sec-get-o-p" class="e-user-code">Get</a></emu-xref>(<var>nextItem</var>, <emu-val>"0"</emu-val>)).</li><li><emu-xref aoid="IfAbruptCloseIterator" id="_ref_11809"><a href="#sec-ifabruptcloseiterator" class="e-user-code">IfAbruptCloseIterator</a></emu-xref>(<var>k</var>, <var>iteratorRecord</var>).</li><li>Let <var>v</var> be <emu-xref aoid="Completion" id="_ref_11810"><a href="#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Get" id="_ref_11811"><a href="#sec-get-o-p" class="e-user-code">Get</a></emu-xref>(<var>nextItem</var>, <emu-val>"1"</emu-val>)).</li><li><emu-xref aoid="IfAbruptCloseIterator" id="_ref_11812"><a href="#sec-ifabruptcloseiterator" class="e-user-code">IfAbruptCloseIterator</a></emu-xref>(<var>v</var>, <var>iteratorRecord</var>).</li><li>Let <var>status</var> be <emu-xref aoid="Completion" id="_ref_11813"><a href="#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call" id="_ref_11814"><a href="#sec-call" class="e-user-code">Call</a></emu-xref>(<var>adder</var>, <var>target</var>, ¬´ <var>k</var>, <var>v</var> ¬ª)).</li><li><emu-xref aoid="IfAbruptCloseIterator" id="_ref_11815"><a href="#sec-ifabruptcloseiterator" class="e-user-code">IfAbruptCloseIterator</a></emu-xref>(<var>status</var>, <var>iteratorRecord</var>).</li></ol></li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>The parameter <var>iterable</var> is expected to be an object that implements an <emu-xref href="#sec-well-known-symbols" id="_ref_11816"><a href="#sec-well-known-symbols">@@iterator</a></emu-xref> method that returns an iterator object that produces a two element <emu-xref href="#sec-lengthofarraylike" id="_ref_11817"><a href="#sec-lengthofarraylike">array-like object</a></emu-xref> whose first element is a value that will be used as a Map key and whose second element is the value to associate with that key.</p>
        </div></emu-note>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-map-constructor">
      <h1><span class="secnum">24.1.2</span> Properties of the Map Constructor</h1>
      <p>The Map <emu-xref href="#constructor" id="_ref_11818"><a href="#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-function-prototype-object" id="_ref_11819"><a href="#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>.</li>
        <li>has the following properties:</li>
      </ul>

      <emu-clause id="sec-map.prototype">
        <h1><span class="secnum">24.1.2.1</span> Map.prototype</h1>
        <p>The initial value of <code>Map.prototype</code> is the <emu-xref href="#sec-properties-of-the-map-prototype-object" id="_ref_11820"><a href="#sec-properties-of-the-map-prototype-object">Map prototype object</a></emu-xref>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
      </emu-clause>

      <emu-clause id="sec-get-map-@@species">
        <h1><span class="secnum">24.1.2.2</span> get Map [ @@species ]</h1>
        <p><code>Map[@@species]</code> is an <emu-xref href="#sec-object-type" id="_ref_11821"><a href="#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps when called:</p>
        <emu-alg><ol><li>Return the <emu-val>this</emu-val> value.</li></ol></emu-alg>
        <p>The value of the <emu-val>"name"</emu-val> property of this function is <emu-val>"get [Symbol.species]"</emu-val>.</p>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>Methods that create derived collection objects should call <emu-xref href="#sec-well-known-symbols" id="_ref_11822"><a href="#sec-well-known-symbols">@@species</a></emu-xref> to determine the <emu-xref href="#constructor" id="_ref_11823"><a href="#constructor">constructor</a></emu-xref> to use to create the derived objects. Subclass <emu-xref href="#constructor" id="_ref_11824"><a href="#constructor">constructor</a></emu-xref> may over-ride <emu-xref href="#sec-well-known-symbols" id="_ref_11825"><a href="#sec-well-known-symbols">@@species</a></emu-xref> to change the default <emu-xref href="#constructor" id="_ref_11826"><a href="#constructor">constructor</a></emu-xref> assignment.</p>
        </div></emu-note>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-map-prototype-object">
      <h1><span class="secnum">24.1.3</span> Properties of the Map Prototype Object</h1>
      <p>The <dfn>Map prototype object</dfn>:</p>
      <ul>
        <li>is <dfn>%Map.prototype%</dfn>.</li>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-object-prototype-object" id="_ref_11827"><a href="#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>.</li>
        <li>is an <emu-xref href="#ordinary-object" id="_ref_11828"><a href="#ordinary-object">ordinary object</a></emu-xref>.</li>
        <li>does not have a [[MapData]] internal slot.</li>
      </ul>

      <emu-clause id="sec-map.prototype.clear">
        <h1><span class="secnum">24.1.3.1</span> Map.prototype.clear ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11829"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[MapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11830"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[MapData]].</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11831"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>Set <var>p</var>.[[Key]] to <emu-const>empty</emu-const>.</li><li>Set <var>p</var>.[[Value]] to <emu-const>empty</emu-const>.</li></ol></li><li>Return <emu-val>undefined</emu-val>.</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>The existing [[MapData]] <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11832"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> is preserved because there may be existing Map Iterator objects that are suspended midway through iterating over that <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11833"><a href="#sec-list-and-record-specification-type">List</a></emu-xref>.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-map.prototype.constructor">
        <h1><span class="secnum">24.1.3.2</span> Map.prototype.constructor</h1>
        <p>The initial value of <code>Map.prototype.constructor</code> is <emu-xref href="#sec-map-constructor" id="_ref_11834"><a href="#sec-map-constructor">%Map%</a></emu-xref>.</p>
      </emu-clause>

      <emu-clause id="sec-map.prototype.delete">
        <h1><span class="secnum">24.1.3.3</span> Map.prototype.delete ( <var>key</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11835"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[MapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11836"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[MapData]].</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11837"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>If <var>p</var>.[[Key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValueZero" id="_ref_11838"><a href="#sec-samevaluezero">SameValueZero</a></emu-xref>(<var>p</var>.[[Key]], <var>key</var>) is <emu-val>true</emu-val>, then<ol><li>Set <var>p</var>.[[Key]] to <emu-const>empty</emu-const>.</li><li>Set <var>p</var>.[[Value]] to <emu-const>empty</emu-const>.</li><li>Return <emu-val>true</emu-val>.</li></ol></li></ol></li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>The value <emu-const>empty</emu-const> is used as a specification device to indicate that an entry has been deleted. Actual implementations may take other actions such as physically removing the entry from internal data structures.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-map.prototype.entries">
        <h1><span class="secnum">24.1.3.4</span> Map.prototype.entries ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Return ?&nbsp;<emu-xref aoid="CreateMapIterator" id="_ref_11839"><a href="#sec-createmapiterator">CreateMapIterator</a></emu-xref>(<var>M</var>, <emu-const>key+value</emu-const>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-map.prototype.foreach">
        <h1><span class="secnum">24.1.3.5</span> Map.prototype.forEach ( <var>callbackfn</var> [ , <var>thisArg</var> ] )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11840"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[MapData]]).</li><li>If <emu-xref aoid="IsCallable" id="_ref_11841"><a href="#sec-iscallable">IsCallable</a></emu-xref>(<var>callbackfn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11842"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[MapData]].</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11843"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>e</var> of <var>entries</var>, do<ol><li>If <var>e</var>.[[Key]] is not <emu-const>empty</emu-const>, then<ol><li>Perform ?&nbsp;<emu-xref aoid="Call" id="_ref_11844"><a href="#sec-call" class="e-user-code">Call</a></emu-xref>(<var>callbackfn</var>, <var>thisArg</var>, ¬´ <var>e</var>.[[Value]], <var>e</var>.[[Key]], <var>M</var> ¬ª).</li></ol></li></ol></li><li>Return <emu-val>undefined</emu-val>.</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p><var>callbackfn</var> should be a function that accepts three arguments. <code>forEach</code> calls <var>callbackfn</var> once for each key/value pair present in the Map, in key insertion order. <var>callbackfn</var> is called only for keys of the Map which actually exist; it is not called for keys that have been deleted from the Map.</p>
          <p>If a <var>thisArg</var> parameter is provided, it will be used as the <emu-val>this</emu-val> value for each invocation of <var>callbackfn</var>. If it is not provided, <emu-val>undefined</emu-val> is used instead.</p>
          <p><var>callbackfn</var> is called with three arguments: the value of the item, the key of the item, and the Map being traversed.</p>
          <p><code>forEach</code> does not directly mutate the object on which it is called but the object may be mutated by the calls to <var>callbackfn</var>. Each entry of a map's [[MapData]] is only visited once. New keys added after the call to <code>forEach</code> begins are visited. A key will be revisited if it is deleted after it has been visited and then re-added before the <code>forEach</code> call completes. Keys that are deleted after the call to <code>forEach</code> begins and before being visited are not visited unless the key is added again before the <code>forEach</code> call completes.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-map.prototype.get">
        <h1><span class="secnum">24.1.3.6</span> Map.prototype.get ( <var>key</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11845"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[MapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11846"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[MapData]].</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11847"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>If <var>p</var>.[[Key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValueZero" id="_ref_11848"><a href="#sec-samevaluezero">SameValueZero</a></emu-xref>(<var>p</var>.[[Key]], <var>key</var>) is <emu-val>true</emu-val>, return <var>p</var>.[[Value]].</li></ol></li><li>Return <emu-val>undefined</emu-val>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-map.prototype.has">
        <h1><span class="secnum">24.1.3.7</span> Map.prototype.has ( <var>key</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11849"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[MapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11850"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[MapData]].</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11851"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>If <var>p</var>.[[Key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValueZero" id="_ref_11852"><a href="#sec-samevaluezero">SameValueZero</a></emu-xref>(<var>p</var>.[[Key]], <var>key</var>) is <emu-val>true</emu-val>, return <emu-val>true</emu-val>.</li></ol></li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-map.prototype.keys">
        <h1><span class="secnum">24.1.3.8</span> Map.prototype.keys ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Return ?&nbsp;<emu-xref aoid="CreateMapIterator" id="_ref_11853"><a href="#sec-createmapiterator">CreateMapIterator</a></emu-xref>(<var>M</var>, <emu-const>key</emu-const>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-map.prototype.set">
        <h1><span class="secnum">24.1.3.9</span> Map.prototype.set ( <var>key</var>, <var>value</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11854"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[MapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11855"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[MapData]].</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11856"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>If <var>p</var>.[[Key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValueZero" id="_ref_11857"><a href="#sec-samevaluezero">SameValueZero</a></emu-xref>(<var>p</var>.[[Key]], <var>key</var>) is <emu-val>true</emu-val>, then<ol><li>Set <var>p</var>.[[Value]] to <var>value</var>.</li><li>Return <var>M</var>.</li></ol></li></ol></li><li>If <var>key</var> is <emu-val>-0</emu-val><sub>ùîΩ</sub>, set <var>key</var> to <emu-val>+0</emu-val><sub>ùîΩ</sub>.</li><li>Let <var>p</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11858"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]]: <var>key</var>, [[Value]]: <var>value</var> }.</li><li>Append <var>p</var> as the last element of <var>entries</var>.</li><li>Return <var>M</var>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-get-map.prototype.size">
        <h1><span class="secnum">24.1.3.10</span> get Map.prototype.size</h1>
        <p><code>Map.prototype.size</code> is an <emu-xref href="#sec-object-type" id="_ref_11859"><a href="#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11860"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[MapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11861"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[MapData]].</li><li>Let <var>count</var> be 0.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11862"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>If <var>p</var>.[[Key]] is not <emu-const>empty</emu-const>, set <var>count</var> to <var>count</var> + 1.</li></ol></li><li>Return <emu-xref aoid="ùîΩ" id="_ref_11863"><a href="#ùîΩ">ùîΩ</a></emu-xref>(<var>count</var>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-map.prototype.values">
        <h1><span class="secnum">24.1.3.11</span> Map.prototype.values ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Return ?&nbsp;<emu-xref aoid="CreateMapIterator" id="_ref_11864"><a href="#sec-createmapiterator">CreateMapIterator</a></emu-xref>(<var>M</var>, <emu-const>value</emu-const>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-map.prototype-@@iterator">
        <h1><span class="secnum">24.1.3.12</span> Map.prototype [ @@iterator ] ( )</h1>
        <p>The initial value of the <emu-xref href="#sec-well-known-symbols" id="_ref_11865"><a href="#sec-well-known-symbols">@@iterator</a></emu-xref> property is %Map.prototype.entries%, defined in <emu-xref href="#sec-map.prototype.entries" id="_ref_749"><a href="#sec-map.prototype.entries">24.1.3.4</a></emu-xref>.</p>
      </emu-clause>

      <emu-clause id="sec-map.prototype-@@tostringtag">
        <h1><span class="secnum">24.1.3.13</span> Map.prototype [ @@toStringTag ]</h1>
        <p>The initial value of the <emu-xref href="#sec-well-known-symbols" id="_ref_11866"><a href="#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value <emu-val>"Map"</emu-val>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-map-instances">
      <h1><span class="secnum">24.1.4</span> Properties of Map Instances</h1>
      <p>Map instances are <emu-xref href="#ordinary-object" id="_ref_11867"><a href="#ordinary-object">ordinary objects</a></emu-xref> that inherit properties from the Map prototype. Map instances also have a [[MapData]] internal slot.</p>
    </emu-clause>

    <emu-clause id="sec-map-iterator-objects">
      <h1><span class="secnum">24.1.5</span> Map Iterator Objects</h1>
      <p>A Map Iterator is an object, that represents a specific iteration over some specific Map instance object. There is not a named <emu-xref href="#constructor" id="_ref_11868"><a href="#constructor">constructor</a></emu-xref> for Map Iterator objects. Instead, map iterator objects are created by calling certain methods of Map instance objects.</p>

      <emu-clause id="sec-createmapiterator" type="abstract operation" oldids="sec-properties-of-map-iterator-instances,table-50,table-internal-slots-of-map-iterator-instances" aoid="CreateMapIterator"><span id="table-internal-slots-of-map-iterator-instances"></span><span id="table-50"></span><span id="sec-properties-of-map-iterator-instances"></span>
        <h1><span class="secnum">24.1.5.1</span> CreateMapIterator ( <var>map</var>, <var>kind</var> )</h1>
        <p>The abstract operation CreateMapIterator takes arguments <var>map</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_11869"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and <var>kind</var> (<emu-const>key+value</emu-const>, <emu-const>key</emu-const>, or <emu-const>value</emu-const>) and returns either a <emu-xref href="#sec-completion-record-specification-type" id="_ref_11870"><a href="#sec-completion-record-specification-type">normal completion containing</a></emu-xref> a Generator or a <emu-xref href="#sec-completion-record-specification-type" id="_ref_11871"><a href="#sec-completion-record-specification-type">throw completion</a></emu-xref>. It is used to create iterator objects for Map methods that return such iterators. It performs the following steps when called:</p>
        <emu-alg><ol><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11872"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>map</var>, [[MapData]]).</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure" id="_ref_11873"><a href="#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>map</var> and <var>kind</var> and performs the following steps when called:<ol><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11874"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>map</var>.[[MapData]].</li><li>Let <var>index</var> be 0.</li><li>Let <var>numEntries</var> be the number of elements of <var>entries</var>.</li><li>Repeat, while <var>index</var> &lt; <var>numEntries</var>,<ol><li>Let <var>e</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11875"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } that is the value of <var>entries</var>[<var>index</var>].</li><li>Set <var>index</var> to <var>index</var> + 1.</li><li>If <var>e</var>.[[Key]] is not <emu-const>empty</emu-const>, then<ol><li>If <var>kind</var> is <emu-const>key</emu-const>, let <var>result</var> be <var>e</var>.[[Key]].</li><li>Else if <var>kind</var> is <emu-const>value</emu-const>, let <var>result</var> be <var>e</var>.[[Value]].</li><li>Else,<ol><li><emu-xref href="#assert" id="_ref_11876"><a href="#assert">Assert</a></emu-xref>: <var>kind</var> is <emu-const>key+value</emu-const>.</li><li>Let <var>result</var> be <emu-xref aoid="CreateArrayFromList" id="_ref_11877"><a href="#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(¬´ <var>e</var>.[[Key]], <var>e</var>.[[Value]] ¬ª).</li></ol></li><li>Perform ?&nbsp;<emu-xref aoid="GeneratorYield" id="_ref_11878"><a href="#sec-generatoryield">GeneratorYield</a></emu-xref>(<emu-xref aoid="CreateIterResultObject" id="_ref_11879"><a href="#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<var>result</var>, <emu-val>false</emu-val>)).</li><li>NOTE: The number of elements in <var>entries</var> may have changed while execution of this abstract operation was paused by <emu-xref aoid="Yield" id="_ref_11880"><a href="#sec-yield">Yield</a></emu-xref>.</li><li>Set <var>numEntries</var> to the number of elements of <var>entries</var>.</li></ol></li></ol></li><li>Return <emu-val>undefined</emu-val>.</li></ol></li><li>Return <emu-xref aoid="CreateIteratorFromClosure" id="_ref_11881"><a href="#sec-createiteratorfromclosure">CreateIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"%MapIteratorPrototype%"</emu-val>, <emu-xref href="#sec-%mapiteratorprototype%-object" id="_ref_11882"><a href="#sec-%mapiteratorprototype%-object">%MapIteratorPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-%mapiteratorprototype%-object">
        <h1><span class="secnum">24.1.5.2</span> The %MapIteratorPrototype% Object</h1>
        <p>The <dfn>%MapIteratorPrototype%</dfn> object:</p>
        <ul>
          <li>has properties that are inherited by all Map Iterator Objects.</li>
          <li>is an <emu-xref href="#ordinary-object" id="_ref_11883"><a href="#ordinary-object">ordinary object</a></emu-xref>.</li>
          <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-%iteratorprototype%-object" id="_ref_11884"><a href="#sec-%iteratorprototype%-object">%IteratorPrototype%</a></emu-xref>.</li>
          <li>has the following properties:</li>
        </ul>

        <emu-clause id="sec-%mapiteratorprototype%.next">
          <h1><span class="secnum">24.1.5.2.1</span> %MapIteratorPrototype%.next ( )</h1>
          <emu-alg><ol><li>Return ?&nbsp;<emu-xref aoid="GeneratorResume" id="_ref_11885"><a href="#sec-generatorresume">GeneratorResume</a></emu-xref>(<emu-val>this</emu-val> value, <emu-const>empty</emu-const>, <emu-val>"%MapIteratorPrototype%"</emu-val>).</li></ol></emu-alg>
        </emu-clause>

        <emu-clause id="sec-%mapiteratorprototype%-@@tostringtag">
          <h1><span class="secnum">24.1.5.2.2</span> %MapIteratorPrototype% [ @@toStringTag ]</h1>
          <p>The initial value of the <emu-xref href="#sec-well-known-symbols" id="_ref_11886"><a href="#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value <emu-val>"Map Iterator"</emu-val>.</p>
          <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
        </emu-clause>
      </emu-clause>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-set-objects">
    <h1><span class="secnum">24.2</span> Set Objects</h1>
    <p>Set objects are collections of <emu-xref href="#sec-ecmascript-language-types" id="_ref_11887"><a href="#sec-ecmascript-language-types">ECMAScript language values</a></emu-xref>. A distinct value may only occur once as an element of a Set's collection. Distinct values are discriminated using the <emu-xref aoid="SameValueZero" id="_ref_11888"><a href="#sec-samevaluezero">SameValueZero</a></emu-xref> comparison algorithm.</p>
    <p>Set objects must be implemented using either hash tables or other mechanisms that, on average, provide access times that are sublinear on the number of elements in the collection. The data structure used in this specification is only intended to describe the required observable semantics of Set objects. It is not intended to be a viable implementation model.</p>

    <emu-clause id="sec-set-constructor">
      <h1><span class="secnum">24.2.1</span> The Set Constructor</h1>
      <p>The Set <emu-xref href="#constructor" id="_ref_11889"><a href="#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>is <dfn>%Set%</dfn>.</li>
        <li>is the initial value of the <emu-val>"Set"</emu-val> property of the <emu-xref href="#sec-global-object" id="_ref_11890"><a href="#sec-global-object">global object</a></emu-xref>.</li>
        <li>creates and initializes a new Set object when called as a <emu-xref href="#constructor" id="_ref_11891"><a href="#constructor">constructor</a></emu-xref>.</li>
        <li>is not intended to be called as a function and will throw an exception when called in that manner.</li>
        <li>may be used as the value in an <code>extends</code> clause of a class definition. Subclass <emu-xref href="#constructor" id="_ref_11892"><a href="#constructor">constructors</a></emu-xref> that intend to inherit the specified Set behaviour must include a <code>super</code> call to the Set <emu-xref href="#constructor" id="_ref_11893"><a href="#constructor">constructor</a></emu-xref> to create and initialize the subclass instance with the internal state necessary to support the <code>Set.prototype</code> built-in methods.</li>
      </ul>

      <emu-clause id="sec-set-iterable">
        <h1><span class="secnum">24.2.1.1</span> Set ( [ <var>iterable</var> ] )</h1>
        <p>This function performs the following steps when called:</p>
        <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>set</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_11894"><a href="#sec-ordinarycreatefromconstructor" class="e-user-code">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%Set.prototype%"</emu-val>, ¬´ [[SetData]] ¬ª).</li><li>Set <var>set</var>.[[SetData]] to a new empty <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11895"><a href="#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>If <var>iterable</var> is either <emu-val>undefined</emu-val> or <emu-val>null</emu-val>, return <var>set</var>.</li><li>Let <var>adder</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_11896"><a href="#sec-get-o-p" class="e-user-code">Get</a></emu-xref>(<var>set</var>, <emu-val>"add"</emu-val>).</li><li>If <emu-xref aoid="IsCallable" id="_ref_11897"><a href="#sec-iscallable">IsCallable</a></emu-xref>(<var>adder</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>iteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIterator" id="_ref_11898"><a href="#sec-getiterator" class="e-user-code">GetIterator</a></emu-xref>(<var>iterable</var>).</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep" id="_ref_11899"><a href="#sec-iteratorstep" class="e-user-code">IteratorStep</a></emu-xref>(<var>iteratorRecord</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <var>set</var>.</li><li>Let <var>nextValue</var> be ?&nbsp;<emu-xref aoid="IteratorValue" id="_ref_11900"><a href="#sec-iteratorvalue" class="e-user-code">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>status</var> be <emu-xref aoid="Completion" id="_ref_11901"><a href="#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call" id="_ref_11902"><a href="#sec-call" class="e-user-code">Call</a></emu-xref>(<var>adder</var>, <var>set</var>, ¬´ <var>nextValue</var> ¬ª)).</li><li><emu-xref aoid="IfAbruptCloseIterator" id="_ref_11903"><a href="#sec-ifabruptcloseiterator" class="e-user-code">IfAbruptCloseIterator</a></emu-xref>(<var>status</var>, <var>iteratorRecord</var>).</li></ol></li></ol></emu-alg>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-set-constructor">
      <h1><span class="secnum">24.2.2</span> Properties of the Set Constructor</h1>
      <p>The Set <emu-xref href="#constructor" id="_ref_11904"><a href="#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-function-prototype-object" id="_ref_11905"><a href="#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>.</li>
        <li>has the following properties:</li>
      </ul>

      <emu-clause id="sec-set.prototype">
        <h1><span class="secnum">24.2.2.1</span> Set.prototype</h1>
        <p>The initial value of <code>Set.prototype</code> is the <emu-xref href="#sec-properties-of-the-set-prototype-object" id="_ref_11906"><a href="#sec-properties-of-the-set-prototype-object">Set prototype object</a></emu-xref>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
      </emu-clause>

      <emu-clause id="sec-get-set-@@species">
        <h1><span class="secnum">24.2.2.2</span> get Set [ @@species ]</h1>
        <p><code>Set[@@species]</code> is an <emu-xref href="#sec-object-type" id="_ref_11907"><a href="#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps when called:</p>
        <emu-alg><ol><li>Return the <emu-val>this</emu-val> value.</li></ol></emu-alg>
        <p>The value of the <emu-val>"name"</emu-val> property of this function is <emu-val>"get [Symbol.species]"</emu-val>.</p>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>Methods that create derived collection objects should call <emu-xref href="#sec-well-known-symbols" id="_ref_11908"><a href="#sec-well-known-symbols">@@species</a></emu-xref> to determine the <emu-xref href="#constructor" id="_ref_11909"><a href="#constructor">constructor</a></emu-xref> to use to create the derived objects. Subclass <emu-xref href="#constructor" id="_ref_11910"><a href="#constructor">constructor</a></emu-xref> may over-ride <emu-xref href="#sec-well-known-symbols" id="_ref_11911"><a href="#sec-well-known-symbols">@@species</a></emu-xref> to change the default <emu-xref href="#constructor" id="_ref_11912"><a href="#constructor">constructor</a></emu-xref> assignment.</p>
        </div></emu-note>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-set-prototype-object">
      <h1><span class="secnum">24.2.3</span> Properties of the Set Prototype Object</h1>
      <p>The <dfn>Set prototype object</dfn>:</p>
      <ul>
        <li>is <dfn>%Set.prototype%</dfn>.</li>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-object-prototype-object" id="_ref_11913"><a href="#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>.</li>
        <li>is an <emu-xref href="#ordinary-object" id="_ref_11914"><a href="#ordinary-object">ordinary object</a></emu-xref>.</li>
        <li>does not have a [[SetData]] internal slot.</li>
      </ul>

      <emu-clause id="sec-set.prototype.add">
        <h1><span class="secnum">24.2.3.1</span> Set.prototype.add ( <var>value</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11915"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>S</var>, [[SetData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11916"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>S</var>.[[SetData]].</li><li>For each element <var>e</var> of <var>entries</var>, do<ol><li>If <var>e</var> is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValueZero" id="_ref_11917"><a href="#sec-samevaluezero">SameValueZero</a></emu-xref>(<var>e</var>, <var>value</var>) is <emu-val>true</emu-val>, then<ol><li>Return <var>S</var>.</li></ol></li></ol></li><li>If <var>value</var> is <emu-val>-0</emu-val><sub>ùîΩ</sub>, set <var>value</var> to <emu-val>+0</emu-val><sub>ùîΩ</sub>.</li><li>Append <var>value</var> as the last element of <var>entries</var>.</li><li>Return <var>S</var>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-set.prototype.clear">
        <h1><span class="secnum">24.2.3.2</span> Set.prototype.clear ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11918"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>S</var>, [[SetData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11919"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>S</var>.[[SetData]].</li><li>For each element <var>e</var> of <var>entries</var>, do<ol><li>Replace the element of <var>entries</var> whose value is <var>e</var> with an element whose value is <emu-const>empty</emu-const>.</li></ol></li><li>Return <emu-val>undefined</emu-val>.</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>The existing [[SetData]] <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11920"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> is preserved because there may be existing Set Iterator objects that are suspended midway through iterating over that <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11921"><a href="#sec-list-and-record-specification-type">List</a></emu-xref>.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-set.prototype.constructor">
        <h1><span class="secnum">24.2.3.3</span> Set.prototype.constructor</h1>
        <p>The initial value of <code>Set.prototype.constructor</code> is <emu-xref href="#sec-set-constructor" id="_ref_11922"><a href="#sec-set-constructor">%Set%</a></emu-xref>.</p>
      </emu-clause>

      <emu-clause id="sec-set.prototype.delete">
        <h1><span class="secnum">24.2.3.4</span> Set.prototype.delete ( <var>value</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11923"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>S</var>, [[SetData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11924"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>S</var>.[[SetData]].</li><li>For each element <var>e</var> of <var>entries</var>, do<ol><li>If <var>e</var> is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValueZero" id="_ref_11925"><a href="#sec-samevaluezero">SameValueZero</a></emu-xref>(<var>e</var>, <var>value</var>) is <emu-val>true</emu-val>, then<ol><li>Replace the element of <var>entries</var> whose value is <var>e</var> with an element whose value is <emu-const>empty</emu-const>.</li><li>Return <emu-val>true</emu-val>.</li></ol></li></ol></li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>The value <emu-const>empty</emu-const> is used as a specification device to indicate that an entry has been deleted. Actual implementations may take other actions such as physically removing the entry from internal data structures.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-set.prototype.entries">
        <h1><span class="secnum">24.2.3.5</span> Set.prototype.entries ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Return ?&nbsp;<emu-xref aoid="CreateSetIterator" id="_ref_11926"><a href="#sec-createsetiterator">CreateSetIterator</a></emu-xref>(<var>S</var>, <emu-const>key+value</emu-const>).</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>For iteration purposes, a Set appears similar to a Map where each entry has the same value for its key and value.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-set.prototype.foreach">
        <h1><span class="secnum">24.2.3.6</span> Set.prototype.forEach ( <var>callbackfn</var> [ , <var>thisArg</var> ] )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11927"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>S</var>, [[SetData]]).</li><li>If <emu-xref aoid="IsCallable" id="_ref_11928"><a href="#sec-iscallable">IsCallable</a></emu-xref>(<var>callbackfn</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11929"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>S</var>.[[SetData]].</li><li>For each element <var>e</var> of <var>entries</var>, do<ol><li>If <var>e</var> is not <emu-const>empty</emu-const>, then<ol><li>Perform ?&nbsp;<emu-xref aoid="Call" id="_ref_11930"><a href="#sec-call" class="e-user-code">Call</a></emu-xref>(<var>callbackfn</var>, <var>thisArg</var>, ¬´ <var>e</var>, <var>e</var>, <var>S</var> ¬ª).</li></ol></li></ol></li><li>Return <emu-val>undefined</emu-val>.</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p><var>callbackfn</var> should be a function that accepts three arguments. <code>forEach</code> calls <var>callbackfn</var> once for each value present in the Set object, in value insertion order. <var>callbackfn</var> is called only for values of the Set which actually exist; it is not called for keys that have been deleted from the set.</p>
          <p>If a <var>thisArg</var> parameter is provided, it will be used as the <emu-val>this</emu-val> value for each invocation of <var>callbackfn</var>. If it is not provided, <emu-val>undefined</emu-val> is used instead.</p>
          <p><var>callbackfn</var> is called with three arguments: the first two arguments are a value contained in the Set. The same value is passed for both arguments. The Set object being traversed is passed as the third argument.</p>
          <p>The <var>callbackfn</var> is called with three arguments to be consistent with the call back functions used by <code>forEach</code> methods for Map and Array. For Sets, each item value is considered to be both the key and the value.</p>
          <p><code>forEach</code> does not directly mutate the object on which it is called but the object may be mutated by the calls to <var>callbackfn</var>.</p>
          <p>Each value is normally visited only once. However, a value will be revisited if it is deleted after it has been visited and then re-added before the <code>forEach</code> call completes. Values that are deleted after the call to <code>forEach</code> begins and before being visited are not visited unless the value is added again before the <code>forEach</code> call completes. New values added after the call to <code>forEach</code> begins are visited.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-set.prototype.has">
        <h1><span class="secnum">24.2.3.7</span> Set.prototype.has ( <var>value</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11931"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>S</var>, [[SetData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11932"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>S</var>.[[SetData]].</li><li>For each element <var>e</var> of <var>entries</var>, do<ol><li>If <var>e</var> is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValueZero" id="_ref_11933"><a href="#sec-samevaluezero">SameValueZero</a></emu-xref>(<var>e</var>, <var>value</var>) is <emu-val>true</emu-val>, return <emu-val>true</emu-val>.</li></ol></li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-set.prototype.keys">
        <h1><span class="secnum">24.2.3.8</span> Set.prototype.keys ( )</h1>
        <p>The initial value of the <emu-val>"keys"</emu-val> property is %Set.prototype.values%, defined in <emu-xref href="#sec-set.prototype.values" id="_ref_750"><a href="#sec-set.prototype.values">24.2.3.10</a></emu-xref>.</p>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>For iteration purposes, a Set appears similar to a Map where each entry has the same value for its key and value.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-get-set.prototype.size">
        <h1><span class="secnum">24.2.3.9</span> get Set.prototype.size</h1>
        <p><code>Set.prototype.size</code> is an <emu-xref href="#sec-object-type" id="_ref_11934"><a href="#sec-object-type">accessor property</a></emu-xref> whose set accessor function is <emu-val>undefined</emu-val>. Its get accessor function performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11935"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>S</var>, [[SetData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11936"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>S</var>.[[SetData]].</li><li>Let <var>count</var> be 0.</li><li>For each element <var>e</var> of <var>entries</var>, do<ol><li>If <var>e</var> is not <emu-const>empty</emu-const>, set <var>count</var> to <var>count</var> + 1.</li></ol></li><li>Return <emu-xref aoid="ùîΩ" id="_ref_11937"><a href="#ùîΩ">ùîΩ</a></emu-xref>(<var>count</var>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-set.prototype.values">
        <h1><span class="secnum">24.2.3.10</span> Set.prototype.values ( )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Return ?&nbsp;<emu-xref aoid="CreateSetIterator" id="_ref_11938"><a href="#sec-createsetiterator">CreateSetIterator</a></emu-xref>(<var>S</var>, <emu-const>value</emu-const>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-set.prototype-@@iterator">
        <h1><span class="secnum">24.2.3.11</span> Set.prototype [ @@iterator ] ( )</h1>
        <p>The initial value of the <emu-xref href="#sec-well-known-symbols" id="_ref_11939"><a href="#sec-well-known-symbols">@@iterator</a></emu-xref> property is %Set.prototype.values%, defined in <emu-xref href="#sec-set.prototype.values" id="_ref_751"><a href="#sec-set.prototype.values">24.2.3.10</a></emu-xref>.</p>
      </emu-clause>

      <emu-clause id="sec-set.prototype-@@tostringtag">
        <h1><span class="secnum">24.2.3.12</span> Set.prototype [ @@toStringTag ]</h1>
        <p>The initial value of the <emu-xref href="#sec-well-known-symbols" id="_ref_11940"><a href="#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value <emu-val>"Set"</emu-val>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-set-instances">
      <h1><span class="secnum">24.2.4</span> Properties of Set Instances</h1>
      <p>Set instances are <emu-xref href="#ordinary-object" id="_ref_11941"><a href="#ordinary-object">ordinary objects</a></emu-xref> that inherit properties from the Set prototype. Set instances also have a [[SetData]] internal slot.</p>
    </emu-clause>

    <emu-clause id="sec-set-iterator-objects">
      <h1><span class="secnum">24.2.5</span> Set Iterator Objects</h1>
      <p>A Set Iterator is an <emu-xref href="#ordinary-object" id="_ref_11942"><a href="#ordinary-object">ordinary object</a></emu-xref>, with the structure defined below, that represents a specific iteration over some specific Set instance object. There is not a named <emu-xref href="#constructor" id="_ref_11943"><a href="#constructor">constructor</a></emu-xref> for Set Iterator objects. Instead, set iterator objects are created by calling certain methods of Set instance objects.</p>

      <emu-clause id="sec-createsetiterator" type="abstract operation" oldids="sec-properties-of-set-iterator-instances,table-51,table-internal-slots-of-set-iterator-instances" aoid="CreateSetIterator"><span id="table-internal-slots-of-set-iterator-instances"></span><span id="table-51"></span><span id="sec-properties-of-set-iterator-instances"></span>
        <h1><span class="secnum">24.2.5.1</span> CreateSetIterator ( <var>set</var>, <var>kind</var> )</h1>
        <p>The abstract operation CreateSetIterator takes arguments <var>set</var> (an <emu-xref href="#sec-ecmascript-language-types" id="_ref_11944"><a href="#sec-ecmascript-language-types">ECMAScript language value</a></emu-xref>) and <var>kind</var> (<emu-const>key+value</emu-const> or <emu-const>value</emu-const>) and returns either a <emu-xref href="#sec-completion-record-specification-type" id="_ref_11945"><a href="#sec-completion-record-specification-type">normal completion containing</a></emu-xref> a Generator or a <emu-xref href="#sec-completion-record-specification-type" id="_ref_11946"><a href="#sec-completion-record-specification-type">throw completion</a></emu-xref>. It is used to create iterator objects for Set methods that return such iterators. It performs the following steps when called:</p>
        <emu-alg><ol><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11947"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>set</var>, [[SetData]]).</li><li>Let <var>closure</var> be a new <emu-xref href="#sec-abstract-closure" id="_ref_11948"><a href="#sec-abstract-closure">Abstract Closure</a></emu-xref> with no parameters that captures <var>set</var> and <var>kind</var> and performs the following steps when called:<ol><li>Let <var>index</var> be 0.</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11949"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>set</var>.[[SetData]].</li><li>Let <var>numEntries</var> be the number of elements of <var>entries</var>.</li><li>Repeat, while <var>index</var> &lt; <var>numEntries</var>,<ol><li>Let <var>e</var> be <var>entries</var>[<var>index</var>].</li><li>Set <var>index</var> to <var>index</var> + 1.</li><li>If <var>e</var> is not <emu-const>empty</emu-const>, then<ol><li>If <var>kind</var> is <emu-const>key+value</emu-const>, then<ol><li>Let <var>result</var> be <emu-xref aoid="CreateArrayFromList" id="_ref_11950"><a href="#sec-createarrayfromlist">CreateArrayFromList</a></emu-xref>(¬´ <var>e</var>, <var>e</var> ¬ª).</li><li>Perform ?&nbsp;<emu-xref aoid="GeneratorYield" id="_ref_11951"><a href="#sec-generatoryield">GeneratorYield</a></emu-xref>(<emu-xref aoid="CreateIterResultObject" id="_ref_11952"><a href="#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<var>result</var>, <emu-val>false</emu-val>)).</li></ol></li><li>Else,<ol><li><emu-xref href="#assert" id="_ref_11953"><a href="#assert">Assert</a></emu-xref>: <var>kind</var> is <emu-const>value</emu-const>.</li><li>Perform ?&nbsp;<emu-xref aoid="GeneratorYield" id="_ref_11954"><a href="#sec-generatoryield">GeneratorYield</a></emu-xref>(<emu-xref aoid="CreateIterResultObject" id="_ref_11955"><a href="#sec-createiterresultobject">CreateIterResultObject</a></emu-xref>(<var>e</var>, <emu-val>false</emu-val>)).</li></ol></li><li>NOTE: The number of elements in <var>entries</var> may have changed while execution of this abstract operation was paused by <emu-xref aoid="Yield" id="_ref_11956"><a href="#sec-yield">Yield</a></emu-xref>.</li><li>Set <var>numEntries</var> to the number of elements of <var>entries</var>.</li></ol></li></ol></li><li>Return <emu-val>undefined</emu-val>.</li></ol></li><li>Return <emu-xref aoid="CreateIteratorFromClosure" id="_ref_11957"><a href="#sec-createiteratorfromclosure">CreateIteratorFromClosure</a></emu-xref>(<var>closure</var>, <emu-val>"%SetIteratorPrototype%"</emu-val>, <emu-xref href="#sec-%setiteratorprototype%-object" id="_ref_11958"><a href="#sec-%setiteratorprototype%-object">%SetIteratorPrototype%</a></emu-xref>).</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-%setiteratorprototype%-object">
        <h1><span class="secnum">24.2.5.2</span> The %SetIteratorPrototype% Object</h1>
        <p>The <dfn>%SetIteratorPrototype%</dfn> object:</p>
        <ul>
          <li>has properties that are inherited by all Set Iterator Objects.</li>
          <li>is an <emu-xref href="#ordinary-object" id="_ref_11959"><a href="#ordinary-object">ordinary object</a></emu-xref>.</li>
          <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-%iteratorprototype%-object" id="_ref_11960"><a href="#sec-%iteratorprototype%-object">%IteratorPrototype%</a></emu-xref>.</li>
          <li>has the following properties:</li>
        </ul>

        <emu-clause id="sec-%setiteratorprototype%.next">
          <h1><span class="secnum">24.2.5.2.1</span> %SetIteratorPrototype%.next ( )</h1>
          <emu-alg><ol><li>Return ?&nbsp;<emu-xref aoid="GeneratorResume" id="_ref_11961"><a href="#sec-generatorresume">GeneratorResume</a></emu-xref>(<emu-val>this</emu-val> value, <emu-const>empty</emu-const>, <emu-val>"%SetIteratorPrototype%"</emu-val>).</li></ol></emu-alg>
        </emu-clause>

        <emu-clause id="sec-%setiteratorprototype%-@@tostringtag">
          <h1><span class="secnum">24.2.5.2.2</span> %SetIteratorPrototype% [ @@toStringTag ]</h1>
          <p>The initial value of the <emu-xref href="#sec-well-known-symbols" id="_ref_11962"><a href="#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value <emu-val>"Set Iterator"</emu-val>.</p>
          <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
        </emu-clause>
      </emu-clause>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-weakmap-objects">
    <h1><span class="secnum">24.3</span> WeakMap Objects</h1>
    <p>WeakMaps are collections of key/value pairs where the keys are objects and values may be arbitrary <emu-xref href="#sec-ecmascript-language-types" id="_ref_11963"><a href="#sec-ecmascript-language-types">ECMAScript language values</a></emu-xref>. A WeakMap may be queried to see if it contains a key/value pair with a specific key, but no mechanism is provided for enumerating the objects it holds as keys. In certain conditions, objects which are not <emu-xref href="#sec-liveness" id="_ref_11964"><a href="#sec-liveness">live</a></emu-xref> are removed as WeakMap keys, as described in <emu-xref href="#sec-weakref-execution" id="_ref_752"><a href="#sec-weakref-execution">9.10.3</a></emu-xref>.</p>
    <p>An implementation may impose an arbitrarily determined latency between the time a key/value pair of a WeakMap becomes inaccessible and the time when the key/value pair is removed from the WeakMap. If this latency was observable to ECMAScript program, it would be a source of indeterminacy that could impact program execution. For that reason, an ECMAScript implementation must not provide any means to observe a key of a WeakMap that does not require the observer to present the observed key.</p>
    <p>WeakMaps must be implemented using either hash tables or other mechanisms that, on average, provide access times that are sublinear on the number of key/value pairs in the collection. The data structure used in this specification is only intended to describe the required observable semantics of WeakMaps. It is not intended to be a viable implementation model.</p>
    <emu-note><span class="note">Note</span><div class="note-contents">
      <p>WeakMap and WeakSets are intended to provide mechanisms for dynamically associating state with an object in a manner that does not ‚Äúleak‚Äù memory resources if, in the absence of the WeakMap or WeakSet, the object otherwise became inaccessible and subject to resource reclamation by the implementation's garbage collection mechanisms. This characteristic can be achieved by using an inverted per-object mapping of weak map instances to keys. Alternatively each weak map may internally store its key to value mappings but this approach requires coordination between the WeakMap or WeakSet implementation and the garbage collector. The following references describe mechanism that may be useful to implementations of WeakMap and WeakSets:</p>
      <p>Barry Hayes. 1997. Ephemerons: a new finalization mechanism. In <i>Proceedings of the 12th ACM SIGPLAN conference on Object-oriented programming, systems, languages, and applications (OOPSLA '97)</i>, A. Michael Berman (Ed.). ACM, New York, NY, USA, 176-183, <a href="http://doi.acm.org/10.1145/263698.263733">http://doi.acm.org/10.1145/263698.263733</a>.</p>
      <p>Alexandra Barros, Roberto Ierusalimschy, Eliminating Cycles in Weak Tables. Journal of Universal Computer Science - J.UCS, vol. 14, no. 21, pp. 3481-3497, 2008, <a href="http://www.jucs.org/jucs_14_21/eliminating_cycles_in_weak">http://www.jucs.org/jucs_14_21/eliminating_cycles_in_weak</a></p>
    </div></emu-note>

    <emu-clause id="sec-weakmap-constructor">
      <h1><span class="secnum">24.3.1</span> The WeakMap Constructor</h1>
      <p>The WeakMap <emu-xref href="#constructor" id="_ref_11965"><a href="#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>is <dfn>%WeakMap%</dfn>.</li>
        <li>is the initial value of the <emu-val>"WeakMap"</emu-val> property of the <emu-xref href="#sec-global-object" id="_ref_11966"><a href="#sec-global-object">global object</a></emu-xref>.</li>
        <li>creates and initializes a new WeakMap when called as a <emu-xref href="#constructor" id="_ref_11967"><a href="#constructor">constructor</a></emu-xref>.</li>
        <li>is not intended to be called as a function and will throw an exception when called in that manner.</li>
        <li>may be used as the value in an <code>extends</code> clause of a class definition. Subclass <emu-xref href="#constructor" id="_ref_11968"><a href="#constructor">constructors</a></emu-xref> that intend to inherit the specified WeakMap behaviour must include a <code>super</code> call to the WeakMap <emu-xref href="#constructor" id="_ref_11969"><a href="#constructor">constructor</a></emu-xref> to create and initialize the subclass instance with the internal state necessary to support the <code>WeakMap.prototype</code> built-in methods.</li>
      </ul>

      <emu-clause id="sec-weakmap-iterable">
        <h1><span class="secnum">24.3.1.1</span> WeakMap ( [ <var>iterable</var> ] )</h1>
        <p>This function performs the following steps when called:</p>
        <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>map</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_11970"><a href="#sec-ordinarycreatefromconstructor" class="e-user-code">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%WeakMap.prototype%"</emu-val>, ¬´ [[WeakMapData]] ¬ª).</li><li>Set <var>map</var>.[[WeakMapData]] to a new empty <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11971"><a href="#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>If <var>iterable</var> is either <emu-val>undefined</emu-val> or <emu-val>null</emu-val>, return <var>map</var>.</li><li>Let <var>adder</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_11972"><a href="#sec-get-o-p" class="e-user-code">Get</a></emu-xref>(<var>map</var>, <emu-val>"set"</emu-val>).</li><li>Return ?&nbsp;<emu-xref aoid="AddEntriesFromIterable" id="_ref_11973"><a href="#sec-add-entries-from-iterable" class="e-user-code">AddEntriesFromIterable</a></emu-xref>(<var>map</var>, <var>iterable</var>, <var>adder</var>).</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>If the parameter <var>iterable</var> is present, it is expected to be an object that implements an <emu-xref href="#sec-well-known-symbols" id="_ref_11974"><a href="#sec-well-known-symbols">@@iterator</a></emu-xref> method that returns an iterator object that produces a two element <emu-xref href="#sec-lengthofarraylike" id="_ref_11975"><a href="#sec-lengthofarraylike">array-like object</a></emu-xref> whose first element is a value that will be used as a WeakMap key and whose second element is the value to associate with that key.</p>
        </div></emu-note>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-weakmap-constructor">
      <h1><span class="secnum">24.3.2</span> Properties of the WeakMap Constructor</h1>
      <p>The WeakMap <emu-xref href="#constructor" id="_ref_11976"><a href="#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-function-prototype-object" id="_ref_11977"><a href="#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>.</li>
        <li>has the following properties:</li>
      </ul>

      <emu-clause id="sec-weakmap.prototype">
        <h1><span class="secnum">24.3.2.1</span> WeakMap.prototype</h1>
        <p>The initial value of <code>WeakMap.prototype</code> is the <emu-xref href="#sec-properties-of-the-weakmap-prototype-object" id="_ref_11978"><a href="#sec-properties-of-the-weakmap-prototype-object">WeakMap prototype object</a></emu-xref>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-weakmap-prototype-object">
      <h1><span class="secnum">24.3.3</span> Properties of the WeakMap Prototype Object</h1>
      <p>The <dfn>WeakMap prototype object</dfn>:</p>
      <ul>
        <li>is <dfn>%WeakMap.prototype%</dfn>.</li>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-object-prototype-object" id="_ref_11979"><a href="#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>.</li>
        <li>is an <emu-xref href="#ordinary-object" id="_ref_11980"><a href="#ordinary-object">ordinary object</a></emu-xref>.</li>
        <li>does not have a [[WeakMapData]] internal slot.</li>
      </ul>

      <emu-clause id="sec-weakmap.prototype.constructor">
        <h1><span class="secnum">24.3.3.1</span> WeakMap.prototype.constructor</h1>
        <p>The initial value of <code>WeakMap.prototype.constructor</code> is <emu-xref href="#sec-weakmap-constructor" id="_ref_11981"><a href="#sec-weakmap-constructor">%WeakMap%</a></emu-xref>.</p>
      </emu-clause>

      <emu-clause id="sec-weakmap.prototype.delete">
        <h1><span class="secnum">24.3.3.2</span> WeakMap.prototype.delete ( <var>key</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11982"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[WeakMapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11983"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[WeakMapData]].</li><li>If <emu-xref aoid="Type" id="_ref_11984"><a href="#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>key</var>) is not Object, return <emu-val>false</emu-val>.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11985"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>If <var>p</var>.[[Key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue" id="_ref_11986"><a href="#sec-samevalue">SameValue</a></emu-xref>(<var>p</var>.[[Key]], <var>key</var>) is <emu-val>true</emu-val>, then<ol><li>Set <var>p</var>.[[Key]] to <emu-const>empty</emu-const>.</li><li>Set <var>p</var>.[[Value]] to <emu-const>empty</emu-const>.</li><li>Return <emu-val>true</emu-val>.</li></ol></li></ol></li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>The value <emu-const>empty</emu-const> is used as a specification device to indicate that an entry has been deleted. Actual implementations may take other actions such as physically removing the entry from internal data structures.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-weakmap.prototype.get">
        <h1><span class="secnum">24.3.3.3</span> WeakMap.prototype.get ( <var>key</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11987"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[WeakMapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11988"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[WeakMapData]].</li><li>If <emu-xref aoid="Type" id="_ref_11989"><a href="#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>key</var>) is not Object, return <emu-val>undefined</emu-val>.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11990"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>If <var>p</var>.[[Key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue" id="_ref_11991"><a href="#sec-samevalue">SameValue</a></emu-xref>(<var>p</var>.[[Key]], <var>key</var>) is <emu-val>true</emu-val>, return <var>p</var>.[[Value]].</li></ol></li><li>Return <emu-val>undefined</emu-val>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-weakmap.prototype.has">
        <h1><span class="secnum">24.3.3.4</span> WeakMap.prototype.has ( <var>key</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11992"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[WeakMapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11993"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[WeakMapData]].</li><li>If <emu-xref aoid="Type" id="_ref_11994"><a href="#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>key</var>) is not Object, return <emu-val>false</emu-val>.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11995"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>If <var>p</var>.[[Key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue" id="_ref_11996"><a href="#sec-samevalue">SameValue</a></emu-xref>(<var>p</var>.[[Key]], <var>key</var>) is <emu-val>true</emu-val>, return <emu-val>true</emu-val>.</li></ol></li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-weakmap.prototype.set">
        <h1><span class="secnum">24.3.3.5</span> WeakMap.prototype.set ( <var>key</var>, <var>value</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>M</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_11997"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>M</var>, [[WeakMapData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_11998"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>M</var>.[[WeakMapData]].</li><li>If <emu-xref aoid="Type" id="_ref_11999"><a href="#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>key</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>For each <emu-xref href="#sec-list-and-record-specification-type" id="_ref_12000"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]], [[Value]] } <var>p</var> of <var>entries</var>, do<ol><li>If <var>p</var>.[[Key]] is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue" id="_ref_12001"><a href="#sec-samevalue">SameValue</a></emu-xref>(<var>p</var>.[[Key]], <var>key</var>) is <emu-val>true</emu-val>, then<ol><li>Set <var>p</var>.[[Value]] to <var>value</var>.</li><li>Return <var>M</var>.</li></ol></li></ol></li><li>Let <var>p</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_12002"><a href="#sec-list-and-record-specification-type">Record</a></emu-xref> { [[Key]]: <var>key</var>, [[Value]]: <var>value</var> }.</li><li>Append <var>p</var> as the last element of <var>entries</var>.</li><li>Return <var>M</var>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-weakmap.prototype-@@tostringtag">
        <h1><span class="secnum">24.3.3.6</span> WeakMap.prototype [ @@toStringTag ]</h1>
        <p>The initial value of the <emu-xref href="#sec-well-known-symbols" id="_ref_12003"><a href="#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value <emu-val>"WeakMap"</emu-val>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-weakmap-instances">
      <h1><span class="secnum">24.3.4</span> Properties of WeakMap Instances</h1>
      <p>WeakMap instances are <emu-xref href="#ordinary-object" id="_ref_12004"><a href="#ordinary-object">ordinary objects</a></emu-xref> that inherit properties from the WeakMap prototype. WeakMap instances also have a [[WeakMapData]] internal slot.</p>
    </emu-clause>
  </emu-clause>

  <emu-clause id="sec-weakset-objects">
    <h1><span class="secnum">24.4</span> WeakSet Objects</h1>
    <p>WeakSets are collections of objects. A distinct object may only occur once as an element of a WeakSet's collection. A WeakSet may be queried to see if it contains a specific object, but no mechanism is provided for enumerating the objects it holds. In certain conditions, objects which are not <emu-xref href="#sec-liveness" id="_ref_12005"><a href="#sec-liveness">live</a></emu-xref> are removed as WeakSet elements, as described in <emu-xref href="#sec-weakref-execution" id="_ref_753"><a href="#sec-weakref-execution">9.10.3</a></emu-xref>.</p>
    <p>An implementation may impose an arbitrarily determined latency between the time an object contained in a WeakSet becomes inaccessible and the time when the object is removed from the WeakSet. If this latency was observable to ECMAScript program, it would be a source of indeterminacy that could impact program execution. For that reason, an ECMAScript implementation must not provide any means to determine if a WeakSet contains a particular object that does not require the observer to present the observed object.</p>
    <p>WeakSets must be implemented using either hash tables or other mechanisms that, on average, provide access times that are sublinear on the number of elements in the collection. The data structure used in this specification is only intended to describe the required observable semantics of WeakSets. It is not intended to be a viable implementation model.</p>
    <emu-note><span class="note">Note</span><div class="note-contents">
      <p>See the NOTE in <emu-xref href="#sec-weakmap-objects" id="_ref_754"><a href="#sec-weakmap-objects">24.3</a></emu-xref>.</p>
    </div></emu-note>

    <emu-clause id="sec-weakset-constructor">
      <h1><span class="secnum">24.4.1</span> The WeakSet Constructor</h1>
      <p>The WeakSet <emu-xref href="#constructor" id="_ref_12006"><a href="#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>is <dfn>%WeakSet%</dfn>.</li>
        <li>is the initial value of the <emu-val>"WeakSet"</emu-val> property of the <emu-xref href="#sec-global-object" id="_ref_12007"><a href="#sec-global-object">global object</a></emu-xref>.</li>
        <li>creates and initializes a new WeakSet when called as a <emu-xref href="#constructor" id="_ref_12008"><a href="#constructor">constructor</a></emu-xref>.</li>
        <li>is not intended to be called as a function and will throw an exception when called in that manner.</li>
        <li>may be used as the value in an <code>extends</code> clause of a class definition. Subclass <emu-xref href="#constructor" id="_ref_12009"><a href="#constructor">constructors</a></emu-xref> that intend to inherit the specified WeakSet behaviour must include a <code>super</code> call to the WeakSet <emu-xref href="#constructor" id="_ref_12010"><a href="#constructor">constructor</a></emu-xref> to create and initialize the subclass instance with the internal state necessary to support the <code>WeakSet.prototype</code> built-in methods.</li>
      </ul>

      <emu-clause id="sec-weakset-iterable">
        <h1><span class="secnum">24.4.1.1</span> WeakSet ( [ <var>iterable</var> ] )</h1>
        <p>This function performs the following steps when called:</p>
        <emu-alg><ol><li>If NewTarget is <emu-val>undefined</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>set</var> be ?&nbsp;<emu-xref aoid="OrdinaryCreateFromConstructor" id="_ref_12011"><a href="#sec-ordinarycreatefromconstructor" class="e-user-code">OrdinaryCreateFromConstructor</a></emu-xref>(NewTarget, <emu-val>"%WeakSet.prototype%"</emu-val>, ¬´ [[WeakSetData]] ¬ª).</li><li>Set <var>set</var>.[[WeakSetData]] to a new empty <emu-xref href="#sec-list-and-record-specification-type" id="_ref_12012"><a href="#sec-list-and-record-specification-type">List</a></emu-xref>.</li><li>If <var>iterable</var> is either <emu-val>undefined</emu-val> or <emu-val>null</emu-val>, return <var>set</var>.</li><li>Let <var>adder</var> be ?&nbsp;<emu-xref aoid="Get" id="_ref_12013"><a href="#sec-get-o-p" class="e-user-code">Get</a></emu-xref>(<var>set</var>, <emu-val>"add"</emu-val>).</li><li>If <emu-xref aoid="IsCallable" id="_ref_12014"><a href="#sec-iscallable">IsCallable</a></emu-xref>(<var>adder</var>) is <emu-val>false</emu-val>, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>iteratorRecord</var> be ?&nbsp;<emu-xref aoid="GetIterator" id="_ref_12015"><a href="#sec-getiterator" class="e-user-code">GetIterator</a></emu-xref>(<var>iterable</var>).</li><li>Repeat,<ol><li>Let <var>next</var> be ?&nbsp;<emu-xref aoid="IteratorStep" id="_ref_12016"><a href="#sec-iteratorstep" class="e-user-code">IteratorStep</a></emu-xref>(<var>iteratorRecord</var>).</li><li>If <var>next</var> is <emu-val>false</emu-val>, return <var>set</var>.</li><li>Let <var>nextValue</var> be ?&nbsp;<emu-xref aoid="IteratorValue" id="_ref_12017"><a href="#sec-iteratorvalue" class="e-user-code">IteratorValue</a></emu-xref>(<var>next</var>).</li><li>Let <var>status</var> be <emu-xref aoid="Completion" id="_ref_12018"><a href="#sec-completion-ao">Completion</a></emu-xref>(<emu-xref aoid="Call" id="_ref_12019"><a href="#sec-call" class="e-user-code">Call</a></emu-xref>(<var>adder</var>, <var>set</var>, ¬´ <var>nextValue</var> ¬ª)).</li><li><emu-xref aoid="IfAbruptCloseIterator" id="_ref_12020"><a href="#sec-ifabruptcloseiterator" class="e-user-code">IfAbruptCloseIterator</a></emu-xref>(<var>status</var>, <var>iteratorRecord</var>).</li></ol></li></ol></emu-alg>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-weakset-constructor">
      <h1><span class="secnum">24.4.2</span> Properties of the WeakSet Constructor</h1>
      <p>The WeakSet <emu-xref href="#constructor" id="_ref_12021"><a href="#constructor">constructor</a></emu-xref>:</p>
      <ul>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-function-prototype-object" id="_ref_12022"><a href="#sec-properties-of-the-function-prototype-object">%Function.prototype%</a></emu-xref>.</li>
        <li>has the following properties:</li>
      </ul>

      <emu-clause id="sec-weakset.prototype">
        <h1><span class="secnum">24.4.2.1</span> WeakSet.prototype</h1>
        <p>The initial value of <code>WeakSet.prototype</code> is the <emu-xref href="#sec-properties-of-the-weakset-prototype-object" id="_ref_12023"><a href="#sec-properties-of-the-weakset-prototype-object">WeakSet prototype object</a></emu-xref>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>false</emu-val> }.</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-the-weakset-prototype-object">
      <h1><span class="secnum">24.4.3</span> Properties of the WeakSet Prototype Object</h1>
      <p>The <dfn>WeakSet prototype object</dfn>:</p>
      <ul>
        <li>is <dfn>%WeakSet.prototype%</dfn>.</li>
        <li>has a [[Prototype]] internal slot whose value is <emu-xref href="#sec-properties-of-the-object-prototype-object" id="_ref_12024"><a href="#sec-properties-of-the-object-prototype-object">%Object.prototype%</a></emu-xref>.</li>
        <li>is an <emu-xref href="#ordinary-object" id="_ref_12025"><a href="#ordinary-object">ordinary object</a></emu-xref>.</li>
        <li>does not have a [[WeakSetData]] internal slot.</li>
      </ul>

      <emu-clause id="sec-weakset.prototype.add">
        <h1><span class="secnum">24.4.3.1</span> WeakSet.prototype.add ( <var>value</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_12026"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>S</var>, [[WeakSetData]]).</li><li>If <emu-xref aoid="Type" id="_ref_12027"><a href="#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>value</var>) is not Object, throw a <emu-val>TypeError</emu-val> exception.</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_12028"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>S</var>.[[WeakSetData]].</li><li>For each element <var>e</var> of <var>entries</var>, do<ol><li>If <var>e</var> is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue" id="_ref_12029"><a href="#sec-samevalue">SameValue</a></emu-xref>(<var>e</var>, <var>value</var>) is <emu-val>true</emu-val>, then<ol><li>Return <var>S</var>.</li></ol></li></ol></li><li>Append <var>value</var> as the last element of <var>entries</var>.</li><li>Return <var>S</var>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-weakset.prototype.constructor">
        <h1><span class="secnum">24.4.3.2</span> WeakSet.prototype.constructor</h1>
        <p>The initial value of <code>WeakSet.prototype.constructor</code> is <emu-xref href="#sec-weakset-constructor" id="_ref_12030"><a href="#sec-weakset-constructor">%WeakSet%</a></emu-xref>.</p>
      </emu-clause>

      <emu-clause id="sec-weakset.prototype.delete">
        <h1><span class="secnum">24.4.3.3</span> WeakSet.prototype.delete ( <var>value</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_12031"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>S</var>, [[WeakSetData]]).</li><li>If <emu-xref aoid="Type" id="_ref_12032"><a href="#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>value</var>) is not Object, return <emu-val>false</emu-val>.</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_12033"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>S</var>.[[WeakSetData]].</li><li>For each element <var>e</var> of <var>entries</var>, do<ol><li>If <var>e</var> is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue" id="_ref_12034"><a href="#sec-samevalue">SameValue</a></emu-xref>(<var>e</var>, <var>value</var>) is <emu-val>true</emu-val>, then<ol><li>Replace the element of <var>entries</var> whose value is <var>e</var> with an element whose value is <emu-const>empty</emu-const>.</li><li>Return <emu-val>true</emu-val>.</li></ol></li></ol></li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>
        <emu-note><span class="note">Note</span><div class="note-contents">
          <p>The value <emu-const>empty</emu-const> is used as a specification device to indicate that an entry has been deleted. Actual implementations may take other actions such as physically removing the entry from internal data structures.</p>
        </div></emu-note>
      </emu-clause>

      <emu-clause id="sec-weakset.prototype.has">
        <h1><span class="secnum">24.4.3.4</span> WeakSet.prototype.has ( <var>value</var> )</h1>
        <p>This method performs the following steps when called:</p>
        <emu-alg><ol><li>Let <var>S</var> be the <emu-val>this</emu-val> value.</li><li>Perform ?&nbsp;<emu-xref aoid="RequireInternalSlot" id="_ref_12035"><a href="#sec-requireinternalslot">RequireInternalSlot</a></emu-xref>(<var>S</var>, [[WeakSetData]]).</li><li>Let <var>entries</var> be the <emu-xref href="#sec-list-and-record-specification-type" id="_ref_12036"><a href="#sec-list-and-record-specification-type">List</a></emu-xref> that is <var>S</var>.[[WeakSetData]].</li><li>If <emu-xref aoid="Type" id="_ref_12037"><a href="#sec-ecmascript-data-types-and-values">Type</a></emu-xref>(<var>value</var>) is not Object, return <emu-val>false</emu-val>.</li><li>For each element <var>e</var> of <var>entries</var>, do<ol><li>If <var>e</var> is not <emu-const>empty</emu-const> and <emu-xref aoid="SameValue" id="_ref_12038"><a href="#sec-samevalue">SameValue</a></emu-xref>(<var>e</var>, <var>value</var>) is <emu-val>true</emu-val>, return <emu-val>true</emu-val>.</li></ol></li><li>Return <emu-val>false</emu-val>.</li></ol></emu-alg>
      </emu-clause>

      <emu-clause id="sec-weakset.prototype-@@tostringtag">
        <h1><span class="secnum">24.4.3.5</span> WeakSet.prototype [ @@toStringTag ]</h1>
        <p>The initial value of the <emu-xref href="#sec-well-known-symbols" id="_ref_12039"><a href="#sec-well-known-symbols">@@toStringTag</a></emu-xref> property is the String value <emu-val>"WeakSet"</emu-val>.</p>
        <p>This property has the attributes { [[Writable]]: <emu-val>false</emu-val>, [[Enumerable]]: <emu-val>false</emu-val>, [[Configurable]]: <emu-val>true</emu-val> }.</p>
      </emu-clause>
    </emu-clause>

    <emu-clause id="sec-properties-of-weakset-instances">
      <h1><span class="secnum">24.4.4</span> Properties of WeakSet Instances</h1>
      <p>WeakSet instances are <emu-xref href="#ordinary-object" id="_ref_12040"><a href="#ordinary-object">ordinary objects</a></emu-xref> that inherit properties from the WeakSet prototype. WeakSet instances also have a [[WeakSetData]] internal slot.</p>
    </emu-clause>
  </emu-clause>
</emu-clause>